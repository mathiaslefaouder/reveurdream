{% extends 'base.html.twig' %}

{% block title %}Me connecter à mon compte{% endblock %}

{% block body %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" />

    <style>
        #dream-step-account-creation li{
            color: #fff;
        }
        form i {
            margin-left: -30px;
            cursor: pointer;
        }
    </style>
      {% for flash_error in app.flashes('verify_email_error') %}

        <div class="alert">
            <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
            {{ error.messageKey|trans(error.messageData, 'security') }}
        </div>
      {% endfor %}



    <section class="postyourdream">

        <div class="wrapper page">
            <!-- Step inscription compte 6b -->
            <div class="dream-phase" id="dream-step-account-creation">

                <h2>Contez votre rêve</h2>
                <p>Inscription et publication</p>
                <h1>{{ 'register.title'|trans }}</h1>
                {{ form_start(registrationForm) }}

                {{ form_row(registrationForm.username) }}
                {{ form_row(registrationForm.email) }}
                {{ form_row(registrationForm.password) }}
                <div class="next-step-buttons">
                    <a class="blue-button" href="{{ url('app_index') }}">{{ 'register.previous'|trans }}</a>
                    <input type="submit" name="submit" id="account-submit" class="blue-button" value="{{ 'register.submit'|trans }}">
                </div>

                {{ form_end(registrationForm) }}
            </div>
        </div>
    </section>

    <script>
        const password = document.querySelector("#registration_form_password_first");
        password.insertAdjacentHTML('afterend', '<i class="bi bi-eye-slash" id="togglePassword"></i>')

        const togglePassword = document.querySelector("#togglePassword");
        togglePassword.addEventListener("click", function () {
            // toggle the type attribute
            const type = password.getAttribute("type") === "password" ? "text" : "password";
            password.setAttribute("type", type);

            // toggle the icon
            this.classList.toggle("bi-eye");
        });

        const password2 = document.querySelector("#registration_form_password_second");
        password2.insertAdjacentHTML('afterend', '<i class="bi bi-eye-slash" id="togglePassword2"></i>')

        const togglePassword2 = document.querySelector("#togglePassword2");
        togglePassword2.addEventListener("click", function () {
            // toggle the type attribute
            const type = password2.getAttribute("type") === "password" ? "text" : "password";
            password2.setAttribute("type", type);

            // toggle the icon
            this.classList.toggle("bi-eye");
        });
    </script>
{% endblock %}
